<mat-card class="create-card">
  <mat-card-header class="create-card__header">
    <button mat-icon-button type="button" aria-label="Back to orders" (click)="navigateBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="create-card__title">
      <h2>New Order</h2>
      <p>Capture the request details before routing it to fulfillment.</p>
    </div>
  </mat-card-header>

  <mat-card-content>
    <form class="create-form" [formGroup]="form" (ngSubmit)="submit()">
      <section class="create-form__section">
        <h3>Customer &amp; owner</h3>
        <div class="create-form__grid">
          <app-entity-lookup
            formControlName="customerId"
            [label]="'Customer'"
            [placeholder]="'Search by company or code'"
            [loader]="loadCustomers"
            [displayWith]="customerDisplay"
            [valueSelector]="customerValue"
            [hint]="'Type to filter customers'"
          ></app-entity-lookup>

          <app-entity-lookup
            formControlName="employeeId"
            [label]="'Account owner'"
            [placeholder]="'Search employee directory'"
            [loader]="loadEmployees"
            [displayWith]="employeeDisplay"
            [valueSelector]="employeeValue"
            [hint]="'Assign an internal owner'"
          ></app-entity-lookup>
        </div>
      </section>

      <section class="create-form__section">
        <h3>Dates &amp; logistics</h3>
        <div class="create-form__grid">
          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Order date</mat-label>
            <input matInput [matDatepicker]="orderDatePicker" formControlName="orderDate" />
            <mat-datepicker-toggle matSuffix [for]="orderDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #orderDatePicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Required by</mat-label>
            <input matInput [matDatepicker]="requiredDatePicker" formControlName="requiredDate" />
            <mat-datepicker-toggle matSuffix [for]="requiredDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #requiredDatePicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Freight (USD)</mat-label>
            <input matInput type="number" formControlName="freight" min="0" step="0.01" />
          </mat-form-field>
        </div>
      </section>

      <section class="create-form__section">
        <h3>Shipping</h3>
        <div class="create-form__grid create-form__grid--stack">
          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Ship name</mat-label>
            <input matInput formControlName="shipName" />
          </mat-form-field>

          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Address</mat-label>
            <input matInput formControlName="shipAddress" />
          </mat-form-field>

          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>City</mat-label>
            <input matInput formControlName="shipCity" />
          </mat-form-field>

          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Region</mat-label>
            <input matInput formControlName="shipRegion" />
          </mat-form-field>

          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Postal code</mat-label>
            <input matInput formControlName="shipPostalCode" />
          </mat-form-field>

          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>Country</mat-label>
            <input matInput formControlName="shipCountry" />
          </mat-form-field>
        </div>
      </section>

      <section class="create-form__section">
        <h3>Notes</h3>
        <mat-form-field appearance="outline" class="create-form__notes" subscriptSizing="dynamic">
          <mat-label>Hand-off notes</mat-label>
          <textarea matInput rows="4" formControlName="notes"></textarea>
        </mat-form-field>
      </section>

      <div class="create-form__actions">
        <button mat-stroked-button type="button" (click)="navigateBack()" [disabled]="creating()">
          Cancel
        </button>
        <button mat-flat-button color="primary" type="submit" [disabled]="creating() || form.invalid">
          <mat-icon>check</mat-icon>
          Create order
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
